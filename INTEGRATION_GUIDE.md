# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ MsproLoader

## üìã –û–±–∑–æ—Ä

`CMsproLoader` - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ `.mspro` —Ñ–∞–π–ª–æ–≤ Encoder V15 –∫ –∏–≥—Ä–µ MU Online.

## üîß –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:
```cpp
struct MsproItemData {
    int Type;           // –¢–∏–ø –ø—Ä–µ–¥–º–µ—Ç–∞ (0-–æ—Ä—É–∂–∏–µ, 6-–∫–æ–ª—å—Ü–∞, –∏ —Ç.–¥.)
    int Index;          // –ò–Ω–¥–µ–∫—Å –ø—Ä–µ–¥–º–µ—Ç–∞
    float R, G, B;      // –¶–≤–µ—Ç–∞ RGB
    int Folder;         // –ü–∞–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (0-Data\Item, 2-Data\Custom\Item)
    int Color;          // –¶–≤–µ—Ç –Ω–∞ –ø–æ–ª—É (-1 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    char BMD[64];       // –ò–º—è BMD —Ñ–∞–π–ª–∞
};

struct MsproEffectData {
    int ItemType;       // –¢–∏–ø –ø—Ä–µ–¥–º–µ—Ç–∞
    int ItemIndex;      // –ò–Ω–¥–µ–∫—Å –ø—Ä–µ–¥–º–µ—Ç–∞
    int EffectType;     // –¢–∏–ø —ç—Ñ—Ñ–µ–∫—Ç–∞ (0-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π, 1-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π)
    int Bone;           // –ö–æ—Å—Ç—å –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞
    int Level;          // –£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ–¥–º–µ—Ç–∞
    float R, G, B;      // –¶–≤–µ—Ç–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞
    float Size;         // –†–∞–∑–º–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–∞
    float Main;         // –û—Å–Ω–æ–≤–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç
    float Side;         // –ë–æ–∫–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç
};
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### 1. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (Items)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ `m_itemsData`

**–ü–ª–∞–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
```cpp
// –í —Ñ—É–Ω–∫—Ü–∏–∏ ApplyItemsData() –¥–æ–±–∞–≤–∏—Ç—å:
for (const auto& item : m_itemsData) {
    // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // 1. –ó–∞–≥—Ä—É–∑–∫–∞ BMD —Ñ–∞–π–ª–æ–≤ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏
    // 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –∫ –ø—Ä–µ–¥–º–µ—Ç–∞–º
    // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
}
```

**–§–∞–π–ª—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
- `ZzzOpenData.cpp` - —Ñ—É–Ω–∫—Ü–∏—è `OpenItems()`
- `ZzzInventory.cpp` - —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- `ZzzInterface.cpp` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### 2. –°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (Effects)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ `m_effectsData`

**–ü–ª–∞–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
```cpp
// –í —Ñ—É–Ω–∫—Ü–∏–∏ ApplyEffectsData() –¥–æ–±–∞–≤–∏—Ç—å:
for (const auto& effect : m_effectsData) {
    // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    // 1. –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // 2. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ—Å—Ç—è–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    // 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤ –∏ —Ä–∞–∑–º–µ—Ä–æ–≤
    // 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
}
```

**–§–∞–π–ª—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
- `ZzzEffect.cpp` - —Å–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `ZzzCharacter.cpp` - —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- `ZzzObject.cpp` - —Å–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–∫—Ç–æ–≤

### 3. –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω—Å—Ç—Ä–æ–≤ (Monsters)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ `m_monstersData`

**–ü–ª–∞–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
```cpp
// –í —Ñ—É–Ω–∫—Ü–∏–∏ ApplyMonstersData() –¥–æ–±–∞–≤–∏—Ç—å:
for (const auto& monster : m_monstersData) {
    // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω—Å—Ç—Ä–æ–≤
    // 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –º–æ–Ω—Å—Ç—Ä–æ–≤
    // 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
    // 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI —Å–∏—Å—Ç–µ–º–æ–π
    // 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–∏ —Å–ø–∞–≤–Ω–∞
}
```

**–§–∞–π–ª—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
- `ZzzAI.cpp` - —Å–∏—Å—Ç–µ–º–∞ AI
- `ZzzObject.cpp` - —Å–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- `ZzzScene.cpp` - —Å–∏—Å—Ç–µ–º–∞ —Å—Ü–µ–Ω

## üöÄ –ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è .mspro —Ñ–∞–π–ª–æ–≤

### –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:
1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞** –ø–æ –∏–º–µ–Ω–∏
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö .txt —Ñ–∞–π–ª–æ–≤
3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –∫ –∏–≥—Ä–µ

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥:
1. **–ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã .mspro —Ñ–∞–π–ª–æ–≤** Encoder V15
2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è**
3. **–ü–∞—Ä—Å–∏–Ω–≥ –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

## üìä –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```cpp
// –í —Ñ—É–Ω–∫—Ü–∏—è—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
char logMsg[256];
sprintf(logMsg, "Applied %d custom items to game", m_itemsData.size());
g_ErrorReport.Write("> %s\r\n", logMsg);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:
   - "Loaded X .mspro files successfully"
   - "Applied X custom items to game"
   - "Applied X custom effects to game"
   - "Applied X custom monsters to game"

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏:
- [ ] –ò–∑—É—á–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ .mspro —Ñ–∞–π–ª–æ–≤ Encoder V15
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ BMD —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –∫ –ø—Ä–µ–¥–º–µ—Ç–∞–º

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏:
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–Ω—Å—Ç—Ä–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ .mspro —Ñ–∞–π–ª–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏:
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ .mspro —Ñ–∞–π–ª–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç—å—é
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–º
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Encoder V15
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –í–∞–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `MsproLoader.h` - –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
- `MsproLoader.cpp` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `ZzzOpenData.cpp` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
- `Encoder V15/` - –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä

---
**–í–µ—Ä—Å–∏—è**: 1.0
**–î–∞—Ç–∞**: 23.07.2025
**–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ—Ç–æ—Ç–∏–ø 