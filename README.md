# MU Online 5.2 - Адаптация под широкоформат

## Описание изменений

Данный проект содержит адаптацию клиента MU Online 5.2 под широкоформатные мониторы без растяжения UI и с корректной прорисовкой карты.

## Основные изменения

### 1. Фиксированный размер UI
- **Файлы**: `Resolution.h`, `Resolution.cpp`
- **Изменения**: Добавлены константы и функции для расчета позиций UI
  - `BASE_UI_WIDTH = 640` - базовая ширина UI
  - `BASE_UI_HEIGHT = 480` - базовая высота UI
  - `BASE_UI_BOTTOM_HEIGHT = 48` - высота нижней панели
  - `GetUIOffsetX()` - расчет смещения по X для центрирования
  - `GetUIBottomY()` - расчет позиции Y для нижней панели

### 2. Центрирование интерфейса
- **Файл**: `ZzzInterface.cpp`
- **Изменения**:
  - `RenderOutSides()` - центрирование фоновых элементов
  - `RenderSwichState()` - центрирование текста переключателей
  - `RenderTimes()` - центрирование макро-таймера
  - `MoveTournamentInterface()` - центрирование турнирного интерфейса

### 3. Адаптация нижней панели
- **Файл**: `NewUIMainFrameWindow.cpp`
- **Изменения**:
  - `RenderFrame()` - центрирование нижней панели
  - `RenderLifeMana()` - центрирование полос HP/MP
  - Добавлен include `Resolution.h`

### 4. Улучшение прорисовки карты
- **Файл**: `ZzzLodTerrain.cpp`
- **Изменения**:
  - `CreateFrustrum2D()` - адаптация области видимости для широкоформата
  - Увеличение области видимости на 50% для мониторов с соотношением сторон > 1.5
  - Увеличение дальности видимости для предотвращения черных пустот по краям

## Технические детали

### Система расчета позиций UI
```cpp
// Получить смещение по X для центрирования UI
int GetUIOffsetX()
{
    return (WindowWidth - BASE_UI_WIDTH) / 2;
}

// Получить позицию Y для нижней панели
int GetUIBottomY()
{
    return WindowHeight - BASE_UI_BOTTOM_HEIGHT;
}
```

### Адаптация области видимости карты
```cpp
// Адаптация для широкоформата - увеличиваем область видимости
float aspectRatio = (float)GetScreenWidth() / (float)GetScreenHeight();
if (aspectRatio > 1.5f) // Широкоформат
{
    Width = (float)GetScreenWidth()/640.f * 1.5f; // Увеличиваем область видимости
    CameraViewFar = 2400.f * 1.5f; // Увеличиваем дальность видимости
}
```

## Результат

1. **Фиксированный UI**: Интерфейс сохраняет оригинальный размер 640x480 и центрируется на экране
2. **Отсутствие растяжения**: Все элементы UI отображаются в правильных пропорциях
3. **Корректная карта**: Устранены черные пустоты по краям при широкоформатных разрешениях
4. **Совместимость**: Поддержка всех разрешений из списка `g_ResolutionList[]`

## Поддерживаемые разрешения

- 640x480 (4:3)
- 800x600 (4:3)
- 1024x768 (4:3)
- 1280x1024 (5:4)
- 1600x1200 (4:3)
- 800x800 (1:1)
- 1280x720 (16:9) - HD
- 1366x768 (16:9) - WXGA
- 1600x900 (16:9) - HD+
- 1920x1080 (16:9) - Full HD
- 2560x1440 (16:9) - 2K

## Компиляция

Проект использует Visual Studio и требует следующие файлы в проекте:
- `Resolution.cpp`
- `Resolution.h`

Все изменения обратно совместимы с оригинальным кодом. 